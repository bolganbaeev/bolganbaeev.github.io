<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>9b Class Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Kaushan+Script&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: row;
            height: 100vh;
            background-color: #f0f4f8;
            color: #333;
        }

        .header {
            display: none; /* Hide header for desktop */
        }

        .sidebar {
            background-color: #2c3e50;
            color: #fff;
            width: 250px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            padding: 20px;
            transition: transform 0.3s ease;
        }

        .sidebar .day {
            font-size: 18px;
            font-weight: bold;
            background-color: #34495e;
            padding: 10px 20px;
            margin: 10px 0;
            border-radius: 5px;
            cursor: pointer;
            text-align: center;
            transition: background-color 0.3s ease;
        }

        .sidebar .day:hover {
            background-color: #1abc9c;
        }

        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .main-content h1 {
            font-size: 28px;
            margin-bottom: 20px;
        }

        .content-section {
            margin-bottom: 30px;
        }

        .content-section h2 {
            font-size: 24px;
            margin-bottom: 10px;
            border-bottom: 2px solid #1abc9c;
            padding-bottom: 5px;
        }

        .content-section ul {
            list-style: none;
            padding: 0;
        }

        .content-section ul li {
            font-size: 18px;
            background-color: #ecf0f1;
            margin: 5px 0;
            padding: 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .content-section ul li:hover {
            background-color: #bdc3c7;
        }

        .content-section ul li span {
            font-weight: bold;
            color: #2c3e50;
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }

            .header {
                display: flex;
                background-color: #2c3e50;
                color: #fff;
                padding: 10px 20px;
                justify-content: space-between;
                align-items: center;
            }

            .header h1 {
                font-family: 'Kaushan Script', cursive;
                font-size: 24px;
                margin: 0;
            }

            .menu-toggle {
                font-size: 24px;
                cursor: pointer;
            }

            .sidebar {
                position: absolute;
                height: 100%;
                transform: translateX(-100%);
            }

            .sidebar.hidden {
                transform: translateX(0);
            }

            .main-content {
                padding: 10px;
            }

            .main-content h1 {
                font-size: 24px;
            }

            .content-section h2 {
                font-size: 20px;
            }

            .content-section ul li {
                font-size: 16px;
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>9b Class</h1>
        <span class="menu-toggle" onclick="toggleSidebar()">☰</span>
    </div>
    <div class="sidebar hidden" id="sidebar">
        <!-- Days will be dynamically inserted here -->
    </div>
    <div class="main-content">
        <h1 id="main-title">9b class portalyna qosh keldińiz</h1>
        <div class="content-section" id="schedule-section">
            <h2>Keste</h2>
            <ul id="schedule-list">
                <!-- Schedule items will be dynamically inserted here -->
            </ul>
        </div>
        <div class="content-section" id="homework-section">
            <h2>Úı tapsyrmasy</h2>
            <ul id="homework-list">
                <!-- Homework items will be dynamically inserted here -->
            </ul>
        </div>
    </div>

    <script>
        // Fetch schedule data with error handling
        async function fetchScheduleData() {
            try {
                const response = await fetch('schedule.json');
                return await response.json();
            } catch (error) {
                console.error('Error fetching schedule data:', error);
                return {};
            }
        }

        // Populate the sidebar with sorted days
        async function populateDays() {
            const sidebar = document.getElementById('sidebar');
            const scheduleData = await fetchScheduleData();
            const monthOrder = ["Qańtar", "Aqpan", "Nauryz", "Sàýir", "Mamyr", "Mausym", "Shilde", "Tamyz", "Qyrkùıek", "Qazan", "Qarasha", "Jeltoqsan"];

            // Sort days by month and day
            const sortedDays = Object.keys(scheduleData).sort((a, b) => {
                const monthA = monthOrder.indexOf(scheduleData[a].month || "");
                const monthB = monthOrder.indexOf(scheduleData[b].month || "");
                return monthA === monthB ? Number(a) - Number(b) : monthA - monthB;
            });

            // Create day buttons dynamically
            sidebar.innerHTML = sortedDays.map(day => {
                const month = scheduleData[day].month || '';
                return `<div class="day" onclick="showSchedule(${day})">${month} ${day}</div>`;
            }).join('');
        }

        // Display schedule and homework for a selected day
        async function showSchedule(day) {
            const scheduleData = await fetchScheduleData();
            const schedule = scheduleData[day];
            const scheduleList = document.getElementById('schedule-list');
            const homeworkList = document.getElementById('homework-list');
            const mainTitle = document.getElementById('main-title');

            // Clear previous content
            scheduleList.innerHTML = '';
            homeworkList.innerHTML = '';

            if (schedule) {
                // Populate schedule and homework
                schedule.subjects.forEach((subject, index) => {
                    scheduleList.innerHTML += `<li>${subject}</li>`;
                    homeworkList.innerHTML += `<li><span>${subject}:</span> ${schedule.homework[index]}</li>`;
                });
                mainTitle.textContent = `${schedule.month} ${day} Keste jàne Ùi tapsyrmasy`;
            } else {
                mainTitle.textContent = `No data available for ${day}`;
            }
        }

        // Toggle sidebar visibility
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('hidden');
        }

        // Initialize the page
        populateDays();
    </script>
</body>
</html>